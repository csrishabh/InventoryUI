<div class= "container-fluid" ng-controller="manifestHistoryController as vm">
<div ng-include="'/consignmentDetailModel.html'"></div>
	<md-sidenav md-component-id="left" class="md-sidenav-left">
   		<md-toolbar class="md-theme-indigo">
       		<h1 class="md-toolbar-tools">Filter Consignment</h1>
     	</md-toolbar>
     	<md-content>
      	<md-list class="md-dense" flex>
      	
      	<div ng-show="activeFilter==1">
        <md-subheader class="md-no-sticky" style="background-color:#d59307">Search By Ref No
        <a class="blueIcon pull-right" ng-click="resetFilter('refId')"><span class="glyphicon glyphicon-remove"></span></a>
        </md-subheader>
	        
	        <md-list-item class="md-1-line" ng-click="null">
		        <md-input-container class = "md-popup-input">
		  		<input type="text" ng-model="filter['refId']" class = "md-popup-input" id="refId" name="refId" dl-enter-key=applyFilter()>
				</md-input-container>
	        </md-list-item>
        
        <md-divider ></md-divider>
        </div>
        
        <div ng-show="activeFilter==2">
        <md-subheader class="md-no-sticky" style="background-color:#d59307"> Created Date
        <a class="blueIcon pull-right" ng-click="resetCreatedDateFilter()"><span class="glyphicon glyphicon-remove"></span></a>
	    </md-subheader>
	       	 <md-list-item class="md-1-line" ng-click="null">
	       	 <label>From</label>
	       	 <md-input-container class = "md-popup-input">
       	    	<input mdc-datetime-picker date="true" time="false" type="text" id="fromCreatedDate" name="fromCreatedDate"
               		   click-outside-to-close="true"
               		   auto-ok="true"
                       format="DD-MM-YYYY"
                       min-date = "minDate"
                       max-date = "createdDate2 ? createdDate2 : today"
                       ng-model="createdDate1" class="md-popup-input" tabindex="-1" ng-change= "onDateChange('createdDate1',createdDate1)">
    		</md-input-container>
    		<label>To</label>
    		<md-input-container class = "md-popup-input">
       	    	<input mdc-datetime-picker date="true" time="false" type="text" id="tocreatedDate" name ="tocreatedDate"
               		   click-outside-to-close="true"
               		   auto-ok="true"
                       format="DD-MM-YYYY"
                       min-date = "createdDate1"
                       max-date = "today"
                       ng-disabled="createdDate1 === null"
                       ng-model="createdDate2" class="md-popup-input" tabindex="-1" ng-change= "onDateChange('createdDate2',createdDate2)">
            </md-input-container>                 
		    </md-list-item>    
		<md-divider ></md-divider>
		</div>
		
		
        <div ng-show="activeFilter==3">
        <md-subheader class="md-no-sticky" style="background-color:#d59307">Search By Destination
         <a class="blueIcon pull-right" ng-click="resetFilter('des')"><span class="glyphicon glyphicon-remove"></span></a>
        </md-subheader>
        <md-list-item class="md-1-line" ng-click="null">
		        <md-input-container class = "md-popup-input">
		  		<input type="text" ng-model="filter['des']" class = "md-popup-input" id="destination" name="destination" dl-enter-key=applyFilter()>
				</md-input-container>
	        </md-list-item>
	    <md-divider ></md-divider>
	    </div> 
	    
		<div ng-show="activeFilter==4">
	    <md-subheader class="md-no-sticky" style="background-color:#d59307">Search By Company
	     <a class="blueIcon pull-right" ng-click="resetFilter('company')"><span class="glyphicon glyphicon-remove"></span></a>
	    </md-subheader> 
	         <md-list-item class="md-1-line">
	         <md-autocomplete class = "filter-search"
					name = "vendor"
					md-input-name="vendor"
          			md-no-cache="true"
          			md-search-text="vendorName"
          			md-items="vendor in getUser(vendorName,'COMPANY_CARGO')"
          			md-selected-item-change="onFilterChange('company',company.username)"
          			md-item-text="vendor.fullname"
          			md-min-length="1"
          			md-floating-label="vendor">
        		<md-item-template>
          			<span d-highlight-text="vendorName" md-highlight-flags="^i">{{vendor.fullname}}</span>
        		</md-item-template>
	        </md-list-item>
	            
	    <md-divider ></md-divider> 
	    </div>
	    
	    
	    
	    <div ng-show="activeFilter==5">
	    <md-subheader class="md-no-sticky" style="background-color:#d59307">Search By Type</md-subheader>
	         
	        <md-list-item class="md-1-line" ng-click="null"> 
	        <md-input-container class="md-popup-input md-table-input">
          						<md-select class="md-popup-input" ng-model="filter['type']" ng-change = "applyFilter()" ng-init=" filter['type'] = 'false' ">
          						<md-option value = "ALL">All</md-option>
            					<md-option value = "true">Deleted</md-option>
            					<md-option value = "false">Added</md-option>
            </md-select>
           </md-input-container> 
           </md-list-item>
	      <md-divider ></md-divider> 
	    </div>
	    
	    <div ng-show="activeFilter!=1">
        <md-subheader class="md-no-sticky">Search By Ref No
        <a class="blueIcon pull-right" ng-click="resetFilter('refId')"><span class="glyphicon glyphicon-remove"></span></a>
        </md-subheader>
	        
	        <md-list-item class="md-1-line" ng-click="null">
		        <md-input-container class = "md-popup-input">
		  		<input type="text" ng-model="filter['refId']" class = "md-popup-input" id="refId" name="refId" dl-enter-key=applyFilter()>
				</md-input-container>
	        </md-list-item>
        
        <md-divider ></md-divider>
        </div>
        
        <div ng-show="activeFilter!=2">
        <md-subheader class="md-no-sticky"> Created Date
        <a class="blueIcon pull-right" ng-click="resetCreatedDateFilter()"><span class="glyphicon glyphicon-remove"></span></a>
	    </md-subheader>
	       	 <md-list-item class="md-1-line" ng-click="null">
	       	 <label>From</label>
	       	 <md-input-container class = "md-popup-input">
       	    	<input mdc-datetime-picker date="true" time="false" type="text" id="fromCreatedDate" name="fromCreatedDate"
               		   click-outside-to-close="true"
               		   auto-ok="true"
                       format="DD-MM-YYYY"
                       min-date = "minDate"
                       max-date = "createdDate2 ? createdDate2 : today"
                       ng-model="createdDate1" class="md-popup-input" tabindex="-1" ng-change= "onDateChange('createdDate1',createdDate1)">
    		</md-input-container>
    		<label>To</label>
    		<md-input-container class = "md-popup-input">
       	    	<input mdc-datetime-picker date="true" time="false" type="text" id="tocreatedDate" name ="tocreatedDate"
               		   click-outside-to-close="true"
               		   auto-ok="true"
                       format="DD-MM-YYYY"
                       min-date = "createdDate1"
                       max-date = "today"
                       ng-disabled="createdDate1 === null"
                       ng-model="createdDate2" class="md-popup-input" tabindex="-1" ng-change= "onDateChange('createdDate2',createdDate2)">
            </md-input-container>                 
		    </md-list-item>    
		<md-divider ></md-divider>
		</div>
		
		
        <div ng-show="activeFilter!=3">
        <md-subheader class="md-no-sticky">Search By Destination
         <a class="blueIcon pull-right" ng-click="resetFilter('des')"><span class="glyphicon glyphicon-remove"></span></a>
        </md-subheader>
        <md-list-item class="md-1-line" ng-click="null">
		        <md-input-container class = "md-popup-input">
		  		<input type="text" ng-model="filter['des']" class = "md-popup-input" id="destination" name="destination" dl-enter-key=applyFilter()>
				</md-input-container>
	        </md-list-item>
	    <md-divider ></md-divider>
	    </div> 
	    
		<div ng-show="activeFilter!=4">
	    <md-subheader class="md-no-sticky">Search By Company
	     <a class="blueIcon pull-right" ng-click="resetFilter('company')"><span class="glyphicon glyphicon-remove"></span></a>
	    </md-subheader> 
	         <md-list-item class="md-1-line">
		       <md-autocomplete class = "filter-search"
					name = "company"
					md-input-name="company"
          			md-no-cache="true"
          			md-search-text="companyName"
          			md-selected-item="company"
          			md-selected-item-change="onFilterChange('company',company.username)"
          			md-items="company in getUser(consignorName,'COMPANY_CARGO')"
          			md-item-text="company.fullname"
          			md-min-length="1"
          			md-floating-label="Company">
        		<md-item-template>
          			<span d-highlight-text="companyName" md-highlight-flags="^i">{{consignor.fullname}}</span>
        		</md-item-template>
      		</md-autocomplete>
	        </md-list-item>
	            
	    <md-divider ></md-divider> 
	    </div>
	    
	    
	    
	    <div ng-show="activeFilter!=5">
	    <md-subheader class="md-no-sticky">Search By Type</md-subheader>
	         
	        <md-list-item class="md-1-line" ng-click="null"> 
	        <md-input-container class="md-popup-input md-table-input">
          						<md-select class="md-popup-input" ng-model="filter['type']" ng-change = "applyFilter()" ng-init=" filter['type'] = 'false' ">
          						<md-option value = "ALL">All</md-option>
            					<md-option value = "true">Deleted</md-option>
            					<md-option value = "false">Added</md-option>
            </md-select>
           </md-input-container> 
           </md-list-item>
	      <md-divider ></md-divider> 
	    </div>
	      
        </md-list>
        </md-content>
  	</md-sidenav>
  	
		<div class="row">
		<div class="table-wrapper-scroll-y text-nowrap" style="max-height: 600px;">
				<table class="table">
					<thead>
						<tr>
							<th scope="col">#</th>
							
							<th scope="col">Ref NO.
							<a href="#"  ng-click = "openFilterNav(1)"> <span class="glyphicon glyphicon-filter"></span></a>
							</th>
							
							<th scope="col">Created Date
							<a href="#"  ng-click = "openFilterNav(2)"> <span class="glyphicon glyphicon-filter"></span></a>
							</th>
							
							<th scope="col">Destination
							<a href="#"  ng-click = "openFilterNav(3)"> <span class="glyphicon glyphicon-filter"></span></a>
							</th>
							
							<th scope="col" >Company
							<a href="#"  ng-click = "openFilterNav(4)"> <span class="glyphicon glyphicon-filter"></span></a>
							</th>
							<th scope="col">Price</th>
							<th scope="col">Consignment details</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="result in searchResults">
							<th scope="row">{{$index+1}}</th>
							<td>{{result.refId}}</td>					
							<td>{{result.createdDate}}</td>
							<td>{{result.des}}</td>
							<td>{{result.company[0]}}</td>
							<td>{{result.price+"/"}} {{result.paidBy | capitalize}}</td>
							<td><a a-disabled="result.consignments==null || result.consignments.lenght==0" href="#" class = "underline" ng-click = "getConsignmentDetails(result.refId,result.consignments)">Show Details</a></td>
							<td><a a-disabled="result.isDeleted"  href="#"  ng-click = "deleteManifest(result.refId)"> <span class="glyphicon glyphicon-trash"></span></a></td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<div class="d-flex">
			<ul class="list-inline">
			<li class ="item">
			<a a-disabled="currentPage === 0" ng-click="updatePageNo(-1)"><span class="glyphicon glyphicon-backward"></span></a>
			</li>
			<li class ="item">
			<a a-disabled="searchResults.length < pageSize" ng-click="updatePageNo(1)"><span class="glyphicon glyphicon-forward"></span></a>
			</li>
			</ul>
			</div>
				
		</div>
		<!-- <div class="row">
		<button type="button"  ng-click="changestatus()" class="btn btn-primary pull-right" ng-disabled="selected.length === 0" >Proceed</button>
		</div> -->
		<div uib-alert ng-repeat="alert in alerts" type="{{alert.type}}"
			close="closeAlert($index)" dismiss-on-timeout=2000 class="alert fade">{{alert.msg}}</div>
</div>